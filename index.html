
<html>
<script>
window.onload = function(){

function openInNewTab(href) {
  Object.assign(document.createElement('a'), {
    target: '_blank',
    href,
  }).click();
}

function join_query(q, text_to_insert) {
	text_to_insert.replace(" ", "+");
	return q[0].concat(text_to_insert, q[1]);
}

document.getElementById("search_box").value = "rtx 2080";
div_websites = document.getElementById("divwebsites");
function add_website(v){
	var entry_div = document.createElement("div");
	div_websites.appendChild(entry_div);

	var checkbox = document.createElement("input");
	checkbox.type = "checkbox";
	checkbox.id = v.name;
	checkbox.checked = 1;

	var label = document.createElement("label");
	label.appendChild(document.createTextNode(v.name));

	entry_div.appendChild(checkbox);
	entry_div.appendChild(label);
}

var websites = [
	{name: "Walmart", url: ["https://www.walmart.com/search/?cat_id=3944_3951_132982_1231618&query=", "&sort=price_low#searchProductResult"]},
	{name: "Amazon", url: ["https://www.amazon.com/s?k=", "&rh=n%3A541966%2Cn%3A13896597011&s=price-asc-rank&dc&qid=1554620698&rnid=2941120011&ref=sr_nr_n_2"]},
	{name: "Newegg", url: ["https://www.newegg.com/Product/ProductList.aspx?Submit=ENE&N=100019095%20100&IsNodeId=1&Description=","&name=Desktop%20Computers&Order=PRICE&Pagesize=60"]},
	{name: "Bestbuy", url: ["https://www.bestbuy.com/site/searchpage.jsp?_dyncharset=UTF-8&id=pcat17071&iht=y&keys=keys&ks=960&list=n&qp=category_facet%3DAll%20Desktops~pcmcat143400050013&sc=Global&sp=%2Bcurrentprice%20skuidsaas&st=", "&type=page&usc=All%20Categories"]},
	];

for (w = 0; w < websites.length; w++) {
	add_website(websites[w]);
}


var search_box = document.getElementById("search_box");
search_box
    .addEventListener("keyup", function(event) {
    event.preventDefault();
    if (event.keyCode === 13) {
        for (w = 0; w < websites.length; w++) {
			var entry_checkbox = document.getElementById(websites[w].name);
			if (entry_checkbox.checked) {
				openInNewTab(join_query(websites[w].url, search_box.value));
			}
		}
    }
});

}

</script>
<body>
<input type="text" id="toadd_url_result">
<input type="text" id="toadd_search_param">
<button type="button" id="toadd_button">Add Query</button>
<div>
<input type="text" id="search_box">
</div>
<div id="divwebsites">
</div>
</body>
</html>
